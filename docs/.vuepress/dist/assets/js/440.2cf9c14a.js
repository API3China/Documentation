(window.webpackJsonp=window.webpackJsonp||[]).push([[440],{1091:function(e,t,a){"use strict";a.r(t);var r=a(15),n=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("TitleSpan",[e._v("Introduction")]),e._v(" "),a("h1",{attrs:{id:"frontmatter-title"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[e._v("#")]),e._v(" "+e._s(e.$frontmatter.title))]),e._v(" "),a("VersionWarning"),e._v(" "),a("TocHeader"),e._v(" "),a("TOC",{staticClass:"table-of-contents",attrs:{"include-level":[2,3]}}),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("尝试通过 "),a("a",{attrs:{href:"https://www.ethdenver.com/buidlweek",target:"_blank",rel:"noopener noreferrer"}},[e._v("#BUIDLWEEK"),a("OutboundLink")],1),e._v(" 在ETHDenver来构建Beacon吧！”")])])]),e._v(" "),a("p",[e._v("这个指南将引导您开发一个智能合约，该合约将使用API3以Amberdata运营的第一方预言机设定的Beacon。")]),e._v(" "),a("h2",{attrs:{id:"amberdata-beacons"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#amberdata-beacons"}},[e._v("#")]),e._v(" Amberdata Beacons")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://amberdata.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("Amberdata"),a("OutboundLink")],1),e._v(" 是行业领先的加密货币市场数据提供商之一，并已将其一些API端点开放给了Beacon使用，以供您构建DeFi应用程序。 您可以"),a("RouterLink",{attrs:{to:"/beacon/v0.2/reference/beacon-browser.html"}},[e._v("在此")]),e._v("查看完整的名单。 这些Beacon代表着VWAP（成交量加权平均价）对值，是交易数据的一种汇总方式。 VWAP是资产在一段时间内基于交易量和价格的平均价格。 详细介绍请看下面的Amberdata文档链接，以便更好地理解所提供值的意思。")],1),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://amberdata.io/dictionary/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Data Dictionary"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://docs.amberdata.io/reference#spot-vwap-pairs-latest",target:"_blank",rel:"noopener noreferrer"}},[e._v("Latest [ENT]"),a("OutboundLink")],1),e._v(" - (VWAP)")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://docs.amberdata.io/reference#get-gas-predictions",target:"_blank",rel:"noopener noreferrer"}},[e._v("Gas Predictions"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"需求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需求"}},[e._v("#")]),e._v(" 需求")]),e._v(" "),a("p",[e._v("Beacon在以下网络中可使用：")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[e._v("Network")]),e._v(" "),a("th",{staticStyle:{"text-align":"left"}},[e._v("Network")])])]),e._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[e._v("Ropsten")]),e._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://faucet.egorfine.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://faucet.egorfine.com/"),a("OutboundLink")],1)])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[e._v("Rinkeby")]),e._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://www.rinkebyfaucet.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.rinkebyfaucet.com/"),a("OutboundLink")],1)])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[e._v("Goerli")]),e._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://faucet.goerli.mudit.blog/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://faucet.goerli.mudit.blog/"),a("OutboundLink")],1)])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[e._v("Polygon-Mumbai")]),e._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://faucet.polygon.technology/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://faucet.polygon.technology/"),a("OutboundLink")],1)])])])]),e._v(" "),a("p",[e._v("选择您想要处理工作的网络，创建一个钱包，然后从相应的源头为其提供资金。")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("你可以运行 "),a("code",[e._v("npx @api3/airnode-admin 生成助记符号")]),e._v("。")])]),e._v(" "),a("p",[e._v("您还需要一个区块链提供商URL。 您可以在Ropsten，Rinkeby和Goerli创建一个免费的"),a("a",{attrs:{href:"https://infura.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Infura"),a("OutboundLink")],1),e._v(" 账户，或者使Polygon-Mumbai的公开提供商URL之一，例如 "),a("code",[e._v("https://rpc-mumbai.today")]),e._v("。 在接下来的步骤中，您钱包的助记词和区块链提供商URL将放入您的 "),a("code",[e._v("credentials.json")]),e._v(" 文件中。")]),e._v(" "),a("h2",{attrs:{id:"操作指南"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作指南"}},[e._v("#")]),e._v(" 操作指南")]),e._v(" "),a("p",[e._v("复制这个 "),a("a",{attrs:{href:"https://github.com/api3dao/beacon-reader-example",target:"_blank",rel:"noopener noreferrer"}},[e._v("Beacon reader example"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/api3dao/beacon-reader-example.git\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" beacon-reader-example\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("安装dependencies")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[e._v("#")]),e._v(" 测试")]),e._v(" "),a("p",[e._v("运行 "),a("code",[e._v("test/")]),e._v(" 目录中定义的单元测试：")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("test")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"网络-localhost"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络-localhost"}},[e._v("#")]),e._v(" 网络： "),a("code",[e._v("localhost")])]),e._v(" "),a("p",[e._v("在单独的终端上启动一个本地的Ethereum节点：")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run eth-node\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("部署 "),a("code",[e._v("MockRrpBeaconServer")]),e._v(", "),a("code",[e._v("BeaconReaderExample")]),e._v(",并模拟设置一个Beacon值：")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run deploy:localhost\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("您可以跳过 "),a("code",[e._v("localhost")]),e._v(" 的白名单步骤。")]),e._v(" "),a("p",[e._v("让 "),a("code",[e._v("BeaconReaderExample")]),e._v("读取模拟的beacon值，然后将其输出在终端上：")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run read-beacon:localhost\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"网络-ropsten-rinkeby-goerli-polygon-mumbai"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络-ropsten-rinkeby-goerli-polygon-mumbai"}},[e._v("#")]),e._v(" 网络： "),a("code",[e._v("ropsten")]),e._v(", "),a("code",[e._v("rinkeby")]),e._v(", "),a("code",[e._v("goerli")]),e._v(", "),a("code",[e._v("polygon-mumbai")])]),e._v(" "),a("p",[e._v("在repo的根目录创建一个 "),a("code",[e._v("credentials.json")]),e._v(" 文件，类似于 "),a("code",[e._v("credentials.example.json")]),e._v("。 填写您将使用的链的助记符和提供者 URL。")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("您可以在以下命令中将"),a("code",[e._v("polygon-mumbai")]),e._v(" 替换为"),a("code",[e._v("ropsten")]),e._v("，"),a("code",[e._v("rinkeby")]),e._v(" 或是"),a("code",[e._v("goerli")]),e._v("。")])]),e._v(" "),a("p",[e._v("部署"),a("code",[e._v("BeaconReaderExample")]),e._v("指向预部署的"),a("code",[e._v("RrpBeaconServer")]),e._v("：")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run deploy:polygon-mumbai\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("将"),a("code",[e._v("BeaconReaderExample")]),e._v("列为白名单，您为由 Amberdata 提供支持的Beacon部署"),a("code",[e._v("ETH/USD")]),e._v("D 案例：")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run whitelist-reader:polygon-mumbai\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("让 "),a("code",[e._v("BeaconReaderExample")]),e._v("读取模拟的beacon值，然后在终端上输出：")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run read-beacon:polygon-mumbai\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("您可以通过修改"),a("code",[e._v("scripts/whitelist-reader.js")]),e._v("和 "),a("code",[e._v("scripts/read-beacon.js")]),e._v("来读取 "),a("code",[e._v("ETH/USD")]),e._v("以外的Beacon值。 请参阅"),a("RouterLink",{attrs:{to:"/beacon/v0.2/reference/beacon-browser.html"}},[e._v("Beacons IDs")]),e._v(" 文档。")],1)]),e._v(" "),a("p",[e._v("这些应该可以让您开始构建一个Beacon项目了！ 如果您想要了解更多信息，请继续阅读。")]),e._v(" "),a("h2",{attrs:{id:"依赖项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#依赖项"}},[e._v("#")]),e._v(" 依赖项")]),e._v(" "),a("p",[e._v("Amberdata 使用 "),a("a",{attrs:{href:"/airnode/v0.3"}},[e._v("Airnode "),a("code",[e._v("v0.3")])]),e._v(" 作为预言机节点，我们 开发了这些节点以支持API提供商操作的预言机. 建议您在项目中使用"),a("code",[e._v("@api3/services")]),e._v("的 "),a("code",[e._v("v0.1")]),e._v(" 版本，以便轻松获取有关特定 Beacon 的信息。")]),e._v(" "),a("h2",{attrs:{id:"api3-services-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api3-services-api"}},[e._v("#")]),e._v(" "),a("code",[e._v("@api3/services")]),e._v(" API")]),e._v(" "),a("p",[a("code",[e._v("@api3/services")]),e._v(" API公开了两个函数：")]),e._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://github.com/api3dao/services/blob/main/src/index.ts#L66",target:"_blank",rel:"noopener noreferrer"}},[e._v("whitelistBeaconReader"),a("OutboundLink")],1),e._v("  （白名单Beacon读取器）：此函数可用于以编程的方式将您已实现和部署的Beacon读取合约列入白名单，以从特定Beacon读取相关值。 您可以在"),a("a",{attrs:{href:"https://github.com/api3dao/beacon-reader-example/blob/main/scripts/whitelist-reader.js#L34",target:"_blank",rel:"noopener noreferrer"}},[e._v("此处"),a("OutboundLink")],1),e._v("的Beacon读取示例项目中看到白名单脚本并使用它。 1.该函数需要5个参数：\n"),a("ul",[a("li",[a("code",[e._v("beaconId")]),e._v(" - 被Beacon读取器列为白名单的Beacon的ID。")]),e._v(" "),a("li",[a("code",[e._v("beaconReaderAddress")]),e._v(" - 被Beacon读取器列为白名单的Beacon的地址。")]),e._v(" "),a("li",[a("code",[e._v("chain")]),e._v(" - 链的名称，例如 "),a("code",[e._v("ropsten")])]),e._v(" "),a("li",[a("code",[e._v("providerUrl")]),e._v(" - 用于创建交易的区块链提供商的URL。")]),e._v(" "),a("li",[a("code",[e._v("senderAccount")]),e._v(" -具有两个方面的对象，"),a("code",[e._v("助记词")]),e._v("（必需）和"),a("code",[e._v("derivationPath")]),e._v(" （可选）指定将用于创建白名单的交易。")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/api3dao/services/blob/main/src/index.ts#L27",target:"_blank",rel:"noopener noreferrer"}},[e._v("getServiceData（获取服务数据）"),a("OutboundLink")],1),e._v(" - 您可以使用此函数来获取特定Beacon的详细信息。 其中返还的信息里最总要的是 "),a("code",[e._v("RrpBeaconServer")]),e._v("（您需要部署的Beacon读取智能合约）以及"),a("code",[e._v("beaconId")]),e._v("（您需要读取Beacon值）。 这个函数需要3个参数：\n"),a("ul",[a("li",[a("code",[e._v("apiname")]),e._v(" - "),a("a",{attrs:{href:"https://github.com/api3dao/operations/tree/main/data/apis",target:"_blank",rel:"noopener noreferrer"}},[e._v("API名称"),a("OutboundLink")],1),e._v(". 目前唯一的选项是 "),a("code",[e._v("Amberdata")]),e._v("。")]),e._v(" "),a("li",[e._v("code>beaconName"),e._v(" - 其中一个"),a("a",{attrs:{href:"https://docs.api3.org/beacon/v0.1/reference/beacon-ids.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("beacons"),a("OutboundLink")],1),e._v("的名字，例如"),a("code",[e._v("ETH/USD")]),e._v("。")]),e._v(" "),a("li",[a("code",[e._v("chain")]),e._v(" - 链的名称，例如 "),a("code",[e._v("ropsten")])])])])]),e._v(" "),a("p",[e._v("使用"),a("code",[e._v("@api3/services")]),e._v("不要求创建一个Beacon读取应用程序。 您可以按照以下说明手册将Beacon读取器智能合约列入白名单中。 您可以从"),a("RouterLink",{attrs:{to:"/beacon/v0.2/reference/beacon-browser.html"}},[e._v("Beacon IDs Section")]),e._v(" 部分库中获取"),a("code",[e._v("beaconId")]),e._v(" ，从"),a("RouterLink",{attrs:{to:"/beacon/v0.2/reference/contract-addresses.html"}},[e._v("Contract Addresses Section")]),e._v("部分库获取"),a("code",[e._v("RrpBeaconServer")]),e._v("的地址。")],1),e._v(" "),a("h2",{attrs:{id:"白名单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#白名单"}},[e._v("#")]),e._v(" 白名单")]),e._v(" "),a("p",[e._v("在智能合约可以读取Beacon值之前，需要通过 API3 DAO 授权的链上机制将其列入白名单。 这是为了保护和货币化第一方预言机服务。 为黑客松设置的Beacon允许自选白名单，这意味着您可以进行交易，并将合同列入白名单以读取特定的Beacon值。")]),e._v(" "),a("p",[e._v("::: 提示")]),e._v(" "),a("p",[e._v("Amberdata Beacon可以在_#BUIDLWEEK_中很多测试网上使用。 对于产出用途而言，您需要与API3 DAO代表联系，将您的合约加入白名单中以便能够读取Beacon值。")]),e._v(" "),a("p",[e._v(":::")]),e._v(" "),a("h3",{attrs:{id:"手动白名单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#手动白名单"}},[e._v("#")]),e._v(" 手动白名单")]),e._v(" "),a("p",[e._v("除了使用 "),a("code",[e._v("@api3/services")]),e._v(" API之外，您还可以通过区块浏览器进行交易来手动将您的合约加入白名单中。")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("1.打开"),a("a",{attrs:{href:"https://etherscan.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Etherscan"),a("OutboundLink")],1),e._v("/"),a("a",{attrs:{href:"https://polygonscan.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Polygonscan"),a("OutboundLink")],1),e._v("，并使用右上角登录按钮右侧的图标选择所需的测试网。")])]),e._v(" "),a("li",[a("p",[e._v("2.在搜索字段中输入"),a("RouterLink",{attrs:{to:"/beacon/v0.2/reference/contract-addresses.html#selfserverrpbeaconserverwhitelister-sol"}},[e._v("SelfServeRrpBeaconServerWhitelister")]),e._v("合约的地址。")],1)]),e._v(" "),a("li",[a("p",[e._v("点击 "),a("em",[e._v("contract > write contract > connect to web3")]),e._v("。 使用您在Etherscan/Polygonscan中选择的测试网链接您的钱包。")])]),e._v(" "),a("li",[a("p",[e._v("选择 "),a("code",[e._v("whitelistReader")]),e._v("  函数（#5），然后输入"),a("RouterLink",{attrs:{to:"/beacon/v0.2/reference/beacon-browser.html"}},[e._v("beaconId")]),e._v("和您的智能合约地址（即Beacon读取器）。")],1)]),e._v(" "),a("li",[a("p",[e._v("点击_Write_ 按钮，从您的钱包中执行交易。")])])]),e._v(" "),a("p",[e._v("::: 警告")]),e._v(" "),a("p",[e._v("每个已部署的Beacon读取合约都需要被它将读取的所有Beacon列入白名单。")]),e._v(" "),a("p",[e._v(":::")]),e._v(" "),a("h2",{attrs:{id:"获取帮助"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取帮助"}},[e._v("#")]),e._v(" 获取帮助")]),e._v(" "),a("p",[e._v("如果您需要任何帮助，请访问"),a("a",{attrs:{href:"https://discord.com/channels/758003776174030948/871787274386411580",target:"_blank",rel:"noopener noreferrer"}},[e._v("API3 Discord support channel"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("h2",{attrs:{id:"与api3一起工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#与api3一起工作"}},[e._v("#")]),e._v(" 与API3一起工作")]),e._v(" "),a("p",[e._v("如果您考虑与API3的核心团队合作。 我们对您的期待永无止境。 我们希望有才华的人认可区块链技术是_大件事_，是未来的大创新，已经准备好让它变得更好，并拥抱未来无数需要协作的旅程。 "),a("RouterLink",{attrs:{to:"/api3/introduction/work.html"}},[e._v("请加入我们API3")]),e._v("，一起创造未来吧！")],1)],1)}),[],!1,null,null,null);t.default=n.exports}}]);