(window.webpackJsonp=window.webpackJsonp||[]).push([[384],{1024:function(s,a,t){"use strict";t.r(a);var e=t(15),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("TitleSpan",[s._v("Docker 镜像")]),s._v(" "),t("h1",{attrs:{id:"frontmatter-title"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[s._v("#")]),s._v(" "+s._s(s.$frontmatter.title))]),s._v(" "),t("VersionWarning"),s._v(" "),t("TocHeader"),s._v(" "),t("TOC",{staticClass:"table-of-contents",attrs:{"include-level":[2,3]}}),s._v(" "),t("p",[s._v("可以使用部署器映像来部署或删除与AWS等云提供商的Airnode。 最简单的方法是使用预设置的软件包。 如果您希望 自行构建镜像，请在部署器软件包"),t("a",{attrs:{href:"https://github.com/api3dao/airnode/tree/v0.5/packages/airnode-deployer/docker",target:"_blank",rel:"noopener noreferrer"}},[s._v("README"),t("OutboundLink")],1),s._v("中查看。")]),s._v(" "),t("p",[s._v("部署器镜像有两条命令。")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("deploy")]),s._v(": 使用配置文件部署或更新一个Airnode。")]),s._v(" "),t("li",[t("code",[s._v("remove")]),s._v(": 使用 "),t("code",[s._v("receivt.json")]),s._v(" 文件删除一个 Airnode")])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("快速部署演示")]),s._v(" "),t("p",[s._v("请参阅 "),t("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/tutorial/"}},[s._v("快速部署演示")]),s._v("，用部署器镜像快速"),t("code",[s._v("deploy")]),s._v(" 和 "),t("code",[s._v("remove")]),s._v("预配置的Airnode。")],1)]),s._v(" "),t("h2",{attrs:{id:"云供应商账户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#云供应商账户"}},[s._v("#")]),s._v(" 云供应商账户")]),s._v(" "),t("p",[s._v("为了将Airnode部署到无服务器的云提供商，你需要向Airnode部署器镜像提供供应商的凭证。 该部署器镜像目前支持部署到AWS和GCP。")]),s._v(" "),t("h3",{attrs:{id:"aws"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws"}},[s._v("#")]),s._v(" AWS")]),s._v(" "),t("p",[s._v("如果你是AWS的新用户，请观看此"),t("a",{attrs:{href:"https://www.youtube.com/watch?v=KngM5bfpttA",target:"_blank",rel:"noopener noreferrer"}},[s._v("视频"),t("OutboundLink")],1),s._v("，以设置AWS账户并创建云供应商的凭证。")]),s._v(" "),t("h3",{attrs:{id:"gcp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gcp"}},[s._v("#")]),s._v(" GCP")]),s._v(" "),t("ul",[t("li",[s._v("创建一个"),t("a",{attrs:{href:"https://cloud.google.com/resource-manager/docs/creating-managing-projects",target:"_blank",rel:"noopener noreferrer"}},[s._v("谷歌云项目"),t("OutboundLink")],1),s._v("。")]),s._v(" "),t("li",[s._v("为你的项目启用"),t("a",{attrs:{href:"https://console.cloud.google.com/apis/library/appengine.googleapis.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("App Engine Admin API"),t("OutboundLink")],1),s._v("。")]),s._v(" "),t("li",[s._v("创建一个具有"),t("code",[s._v("Owner")]),s._v(" 角色的新的")])]),s._v(" "),t("p",[s._v("服务"),s._v("账户。")]),t("p"),s._v(" "),t("ul",[t("li",[s._v("为服务账户添加一个新的JSON类型的访问密钥，并将其下载另存为"),t("code",[s._v("gcp.json")]),s._v("。")])]),s._v(" "),t("h2",{attrs:{id:"部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),t("p",[t("code",[s._v("deploy")]),s._v("命令将创建带有云供应商的Airnode，如果它已经存在，则更新它。 运行deploy命令需要三个文件。")]),s._v(" "),t("ul",[t("li",[s._v("config.json")]),s._v(" "),t("li",[s._v("secrets.env")]),s._v(" "),t("li",[s._v("aws.env (仅适用于 AWS)")]),s._v(" "),t("li",[s._v("gcp.json (仅限GP)")])]),s._v(" "),t("p",[t("code",[s._v("receivt.json")]),s._v(" 文件将在完成后创建。 它包含一些部署信息，并用于移除Airnode。")]),s._v(" "),t("airnode-WarningSimultaneousDeployments",{attrs:{removeLink:"./deployer-image.html#manual-removal"}}),s._v(" "),t("p",[t("airnode-DeployerPermissionsWarning")],1),s._v(" "),t("h3",{attrs:{id:"aws-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-2"}},[s._v("#")]),s._v(" AWS")]),s._v(" "),t("Tabs",{attrs:{type:"border-card"}},[t("Tab",{attrs:{label:"Linux/Mac/WSL2"}},[t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it --rm "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --env-file aws.env "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("USER_ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" -u"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GROUP_ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" -g"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/config:/app/config"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/output:/app/output"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  api3/airnode-deployer:0.6.0 deploy\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])]),s._v(" "),t("Tab",{attrs:{label:"Windows"}},[t("p",[s._v("For Windows, use CMD (而不是PowerShell).")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it --rm ^\n  --env-file aws.env ^\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%cd%/config:/app/config"')]),s._v(" ^\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%cd%/output:/app/output"')]),s._v(" ^\n  api3/airnode-deployer:0.6.0 deploy\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])],1),s._v(" "),t("h3",{attrs:{id:"gcp-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gcp-2"}},[s._v("#")]),s._v(" GCP")]),s._v(" "),t("Tabs",{attrs:{type:"border-card"}},[t("Tab",{attrs:{label:"Linux/Mac/WSL2"}},[t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it --rm "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("USER_ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" -u"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GROUP_ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" -g"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/gcp.json:/app/gcp.json"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/config:/app/config"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/output:/app/output"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  api3/airnode-deployer:0.6.0 deploy\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])]),s._v(" "),t("Tab",{attrs:{label:"Windows"}},[t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it --rm ^\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%cd%/gcp.json:/app/gcp.json"')]),s._v(" ^\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%cd%/config:/app/config"')]),s._v(" ^\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%cd%/output:/app/output"')]),s._v(" ^\n  api3/airnode-deployer:0.6.0 deploy\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])],1),s._v(" "),t("h2",{attrs:{id:"移除"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#移除"}},[s._v("#")]),s._v(" 移除")]),s._v(" "),t("p",[s._v("当使用"),t("code",[s._v("deploy")]),s._v("命令部署Airnode时，会创建一个 "),t("code",[s._v("receipt.json")]),s._v("文件。 使用此文件来删除 Airnode。")]),s._v(" "),t("h3",{attrs:{id:"aws-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-3"}},[s._v("#")]),s._v(" AWS")]),s._v(" "),t("Tabs",{attrs:{type:"border-card"}},[t("Tab",{attrs:{label:"Linux/Mac/WSL2"}},[t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it --rm "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --env-file aws.env "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/output:/app/output"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  api3/airnode-deployer:0.6.0 remove -r output/receipt.json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("Tab",{attrs:{label:"Windows"}},[t("p",[s._v("For Windows, use CMD (而不是PowerShell).")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it --rm ^\n  --env-file aws.env ^\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%cd%/output:/app/output"')]),s._v(" ^\n  api3/airnode-deployer:0.6.0 remove -r output/receipt.json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])],1),s._v(" "),t("h3",{attrs:{id:"gcp-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gcp-3"}},[s._v("#")]),s._v(" GCP")]),s._v(" "),t("Tabs",{attrs:{type:"border-card"}},[t("Tab",{attrs:{label:"Linux/Mac/WSL2"}},[t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it --rm "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/gcp.json:/app/gcp.json"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/output:/app/output"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  api3/airnode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("deployer:0.6.0 remove -r output/receipt.json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("Tab",{attrs:{label:"Windows"}},[t("p",[s._v("For Windows, use CMD (而不是PowerShell).")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it --rm ^\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%cd%/gcp.json:/app/gcp.json"')]),s._v(" ^\n  -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%cd%/output:/app/output"')]),s._v(" ^\n  api3/airnode-deployer:0.6.0 remove -r output/receipt.json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])],1),s._v(" "),t("h2",{attrs:{id:"手动移除"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#手动移除"}},[s._v("#")]),s._v(" 手动移除")]),s._v(" "),t("p",[s._v("你可以选择手动删除Airnode，但强烈建议使用部署者镜像的"),t("code",[s._v("remove")]),s._v("命令来删除。 Airnode在AWS和GCP的多个领域都有存在。 Airnode有一个"),t("code",[s._v("airnodeAddressShort")]),s._v("短地址（例如0ab830c），它包含在AWS和GCP部署功能的元素名称中。")]),s._v(" "),t("p",[s._v("::: 危险提示")]),s._v(" "),t("p",[s._v("只删除你所针对的名称中带有"),t("code",[s._v("airnodeAddressShort")]),s._v("地址的元素。 因为可能存在不止一个的Airnode。")]),s._v(" "),t("p",[s._v(":::")]),s._v(" "),t("Tabs",{attrs:{type:"border-card"}},[t("Tab",{attrs:{label:"AWS"}},[t("airnode-DeleteAirnodeAws")],1),s._v(" "),t("Tab",{attrs:{label:"GCP"}},[t("airnode-DeleteAirnodeGcp")],1)],1),s._v(" "),t("p",[s._v("如需了解更多关于 AWS 或 GCP 的资源，请通过 "),t("RouterLink",{attrs:{to:"/airnode/v0.6/reference/cloud-resources.html"}},[s._v("云资源")]),s._v(" 文档查看。")],1)],1)}),[],!1,null,null,null);a.default=r.exports}}]);