(window.webpackJsonp=window.webpackJsonp||[]).push([[383],{1021:function(a,s,e){"use strict";e.r(s);var n=e(15),t=Object(n.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("TitleSpan",[a._v("Docker 镜像")]),a._v(" "),e("h1",{attrs:{id:"frontmatter-title"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[a._v("#")]),a._v(" "+a._s(a.$frontmatter.title))]),a._v(" "),e("VersionWarning"),a._v(" "),e("TocHeader"),a._v(" "),e("TOC",{staticClass:"table-of-contents",attrs:{"include-level":[2,3]}}),a._v(" "),e("p",[a._v("通常使用 "),e("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/docker/deployer-image.html"}},[a._v("部署器")]),a._v("， 在无服务器平台上部署Airnode 。 不过，还有另一个选择，那就是在本地机器上的docker容器中运行Airnode，无论是在本地还是在云端托管。")],1),a._v(" "),e("p",[a._v("docker客户端镜像已在 "),e("a",{attrs:{href:"https://hub.docker.com/r/api3/airnode-client",target:"_blank",rel:"noopener noreferrer"}},[a._v("Docker Hub"),e("OutboundLink")],1),a._v(" 上发布。 如果您想要从源代码中自行构建容器， 您可以在 "),e("a",{attrs:{href:"https://github.com/api3dao/airnode/tree/v0.5/packages/airnode-node/docker",target:"_blank",rel:"noopener noreferrer"}},[a._v("Airnode 仓库"),e("OutboundLink")],1),a._v(" 中找到镜像以及生成说明。")]),a._v(" "),e("h2",{attrs:{id:"配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[a._v("#")]),a._v(" 配置")]),a._v(" "),e("p",[a._v("Airnode 运行需要两个配置文件： "),e("code",[a._v("config.json")]),a._v(" and "),e("code",[a._v("secrets.env")]),a._v("。 这些文件需要通过 卷传递到 Docker容器。")]),a._v(" "),e("p",[a._v("Docker容器寻找内部安装在 "),e("code",[a._v("/app/config")]),a._v(" 目录下的配置文件。")]),a._v(" "),e("p",[a._v("你当前的工作目录应该包含有上述配置文件的"),e("code",[a._v("config")]),a._v("文件夹，使用"),e("code",[a._v("--volume")]),a._v("参数将其绑定到docker的"),e("code",[a._v("/app/config")]),a._v("目录。")]),a._v(" "),e("Tabs",{attrs:{type:"border-card"}},[e("Tab",{attrs:{label:"Linux/Mac/WSL2"}},[e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("$ tree\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n└── config\n    ├── config.json\n    └── secrets.env\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run --volume "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("pwd")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("/config:/app/config "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br")])])]),a._v(" "),e("Tab",{attrs:{label:"Windows PowerShell"}},[e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("$ tree\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n└── config\n    ├── config.json\n    └── secrets.env\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run --volume "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("pwd")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("/config:/app/config "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br")])])]),a._v(" "),e("Tab",{attrs:{label:"Windows CMD"}},[e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[a._v("$ tree\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n└── config\n    ├── config.json\n    └── secrets.env\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run --volume %cd%:/config:/app/config "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br")])])])],1),a._v(" "),e("h2",{attrs:{id:"用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用法"}},[a._v("#")]),a._v(" 用法")]),a._v(" "),e("p",[a._v("运行 Airnode Docker 容器的示例目录结构和命令。 下面的命令是从描述的目录运行的。")]),a._v(" "),e("h3",{attrs:{id:"运行airnode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行airnode"}},[a._v("#")]),a._v(" 运行Airnode")]),a._v(" "),e("p",[a._v("建议使用 "),e("code",[a._v("--detach")]),a._v(" 参数以分离模式运行 Airnode ，但也可以在没有它的情况下运行它。")]),a._v(" "),e("Tabs",{attrs:{type:"border-card"}},[e("Tab",{attrs:{label:"Linux/Mac/WSL2"}},[e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run --detach "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  --volume "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("pwd")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("/config:/app/config "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  --name airnode "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  api3/airnode-client:0.6.0\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])])]),a._v(" "),e("Tab",{attrs:{label:"Windows PowerShell"}},[e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run --detach "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  --volume "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("pwd")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("/config:/app/config "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  --name airnode "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  api3/airnode-client:0.6.0\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])])]),a._v(" "),e("Tab",{attrs:{label:"Windows"}},[e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run --detach ^\n  --volume %cd%/config:/app/config ^\n  --name airnode ^\n  api3/airnode-client:0.6.0\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])])])],1),a._v(" "),e("blockquote",[e("p",[a._v("如果你想把Airnode连接到运行在localhost上的区块链，需要让区块链可以从docker内部访问。 如果你使用版本的linux，可以使用 "),e("code",[a._v('--network="host"')]),a._v(" 参数。 对于windows、wsl或mac，连接到"),e("code",[a._v("host.docker.internal")]),a._v("而不是"),e("code",[a._v("127.0.0.1")]),a._v("。 请参阅 "),e("a",{attrs:{href:"https://stackoverflow.com/a/24326540",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://stackoverflow.com/a/24326540"),e("OutboundLink")],1),a._v("。")])]),a._v(" "),e("h3",{attrs:{id:"检查-airnode-日志"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#检查-airnode-日志"}},[a._v("#")]),a._v(" 检查 Airnode 日志")]),a._v(" "),e("p",[a._v("如果您以分离模式运行Airnode ，您需要使用 "),e("code",[a._v("日志")]),a._v(" 命令到 访问日志。 你也可以使用"),e("code",[a._v("--follow")]),a._v(" 参数来串联Airnode的日志输出。")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" logs airnode\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("或者")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" logs --follow airnode\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"停止airnode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#停止airnode"}},[a._v("#")]),a._v(" 停止Airnode")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stop airnode\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])])],1)}),[],!1,null,null,null);s.default=t.exports}}]);