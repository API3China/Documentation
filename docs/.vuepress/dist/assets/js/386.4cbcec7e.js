(window.webpackJsonp=window.webpackJsonp||[]).push([[386],{1027:function(t,s,e){"use strict";e.r(s);var n=e(15),a=Object(n.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("TitleSpan",[t._v("创建一个 Airnode")]),t._v(" "),e("h1",{attrs:{id:"frontmatter-title"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[t._v("#")]),t._v(" "+t._s(t.$frontmatter.title))]),t._v(" "),e("VersionWarning"),t._v(" "),e("TocHeader"),t._v(" "),e("TOC",{staticClass:"table-of-contents",attrs:{"include-level":[2,3]}}),t._v(" "),e("p",[t._v("Airnode可以使用"),e("RouterLink",{attrs:{to:"/airnode/v0.6/concepts/authorization.html"}},[t._v("授权者")]),t._v("，授权请求者合约访问其底层API。 这种方法是在链上操作的，需要API供应商具备一些区块链知识。")],1),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/airnode/v0.6/concepts/authorization.html"}},[t._v("授权者")]),t._v('是一个合约，它通常检查一个单一的条件（"请求者是否已经支付了他们的月费"，"这个'),e("code",[t._v("requesterAddress")]),t._v('是否被列入白名单"，等等）。 授权者可以被组合起来以执行更复杂的策略。 如果列表中的任何一个授权者给予访问权，该请求将被认为是已授权的。 从逻辑的角度看，授权结果得到'),e("strong",[t._v("OR")]),t._v("。")],1),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("备选方案：中继的元数据")]),t._v(" "),e("p",[t._v("作为授权者的替代品，API提供者可以使用"),e("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/guides/build-an-airnode/api-security.html#relayed-meta-data-security-schemes"}},[t._v("中继元数据")]),t._v("来验证请求。 这种方法是链外的，不需要API供应商的区块链知识。 请注意，有可能同时使用授权者和中继元数据。")],1)]),t._v(" "),e("p",[t._v("当你部署Airnode时，会产生一个包含Airnode的"),e("code",[t._v("airnodeAddress")]),t._v("的收据文件。 赞助者（通过其赞助的请求者）使用"),e("code",[t._v("airnodeAddress")]),t._v("和"),e("code",[t._v("endpointId")]),t._v("来向你的Airnode的端点提出请求。 然而，你可能也不希望公开为他们服务。")]),t._v(" "),e("ul",[e("li",[t._v("仅为您自己的 "),e("RouterLink",{attrs:{to:"/airnode/v0.6/grp-developers/requesters-sponsors.html"}},[t._v("请求者合约")]),t._v(" 服务。")],1),t._v(" "),e("li",[t._v("仅为已经支付订阅费的赞助者服务。")]),t._v(" "),e("li",[t._v("只为已通过KYC的赞助者服务。")])]),t._v(" "),e("p",[t._v("你可以通过在"),e("code",[t._v("config.json")]),t._v("文件中的"),e("code",[t._v("chains[n].authorizers")]),t._v("提出声明，为Airnode部署的每条链使用不同的授权者合约。 为每个链添加一个授权者合约地址列表。 如果"),e("code",[t._v("chains[n].authorizers")]),t._v("数组为空，那么所有的请求都会被Airnode接受，但仍然可以通过第二种授权方法，即"),e("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/guides/build-an-airnode/apply-auth.html#relay-security-schemes"}},[t._v("中继安全方案")]),t._v("进行过滤。")],1),t._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n ...\n "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"chains"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      ...\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"authorizers"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Requests must satisfy at least one contract")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xeabb...C123"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xCE5e...1abc"')]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      ...\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"authorizers"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// All requests will be processed")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      ...\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"authorizers"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Requests must satisfy one contract")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xeabb...C123"')]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br"),e("span",{staticClass:"line-number"},[t._v("25")]),e("br"),e("span",{staticClass:"line-number"},[t._v("26")]),e("br")])]),e("p",[t._v("无论调用哪个端点，您使用的授权者都会授权所有请求。 端点需要在 "),e("code",[t._v("config.json")]),t._v(" 文件的 "),e("code",[t._v("ois.endpoints")]),t._v(" 字段中声明。 要进一步通过一个特定的端点进行过滤，你必须使用像RequesterAuthorizerWithAirnode这样的授权器。")]),t._v(" "),e("h2",{attrs:{id:"requesterauthorizerwithairnode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#requesterauthorizerwithairnode"}},[t._v("#")]),t._v(" RequesterAuthorizerWithAirnode")]),t._v(" "),e("p",[t._v("授权者的一个常见用例是，为Airnode运营商开发的"),e("RouterLink",{attrs:{to:"/airnode/v0.6/concepts/authorization.html#requesterauthorizerwithairnode"}},[t._v("RequesterAuthorizerWithAirnode")]),t._v("授权者合约，可直接使用。 它允许在每个端点的基础上，对请求者合约（有或没有过期时间戳）设置白名单。 这是最常见的用例，实际上可以满足许多 Airnode 的需求。 你可以在"),e("RouterLink",{attrs:{to:"/airnode/v0.6/reference/airnode-addresses.html"}},[t._v("Airnode合约地址")]),t._v("文档中找到这个授权者的合同地址。")],1),t._v(" "),e("p",[t._v("要使用 Requester AuthorizerWairnode 授权器：")]),t._v(" "),e("ol",[e("li",[t._v("将授权者合同地址添加到"),e("code",[t._v("chain[n].authorizers[]")]),t._v("数组中。")]),t._v(" "),e("li",[t._v("在你的Airnode部署后，调用Admin CLI命令"),e("RouterLink",{attrs:{to:"/airnode/v0.6/reference/packages/admin-cli.html#set-whitelist-expiration"}},[t._v("set-whitelist-expiration")]),t._v("，将所需的请求者合约地址添加到RequesterAuthorizerWithAirnode维护的白名单中。")],1)]),t._v(" "),e("p",[t._v("一旦实施，只有你添加到RequesterAuthorizerWithAirnode的请求者合约地址，才能访问你的Airnode。")])],1)}),[],!1,null,null,null);s.default=a.exports}}]);