(window.webpackJsonp=window.webpackJsonp||[]).push([[389],{1033:function(s,t,a){"use strict";a.r(t);var e=a(15),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("TitleSpan",[s._v("快速部署 AWS")]),s._v(" "),a("h1",{attrs:{id:"frontmatter-title"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[s._v("#")]),s._v(" "+s._s(s.$frontmatter.title))]),s._v(" "),a("VersionWarning"),s._v(" "),a("TocHeader"),s._v(" "),a("TOC",{staticClass:"table-of-contents",attrs:{"include-level":[2,4]}}),s._v(" "),a("p",[s._v("这个演示是一个简单的Airnode部署，使用实践的方法，以更好地了解Airnode"),a("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/docker/deployer-image.html"}},[s._v("部署器镜像")]),s._v("的整体部署过程，它将Airnode的链外组件（又称节点）部署到AWS。 它使用来自"),a("a",{attrs:{href:"https://www.coingecko.com/en/api/documentation",target:"_blank",rel:"noopener noreferrer"}},[s._v("CoinGecko"),a("OutboundLink")],1),s._v("的API端点（"),a("code",[s._v("GET /simple/price")]),s._v("），返回一个代币的当前价值。 这个演示并没有详细说明Airnode的整体配置，它只是一个快速入门。")],1),s._v(" "),a("p",[s._v("Airnode云提供商的部署使用了一个Docker镜像（称为deployer镜像），这又需要三个文件作为输入。")]),s._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/tutorial/quick-deploy-aws/config-json.html"}},[s._v("config.json")])],1),s._v(" "),a("li",[a("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/tutorial/quick-deploy-aws/secrets-env.html"}},[s._v("secrets.env")])],1),s._v(" "),a("li",[a("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/tutorial/quick-deploy-aws/aws-env.html"}},[s._v("aws.env")])],1)]),s._v(" "),a("p",[s._v("为了开展演示，这些文件已经创建，只需要你做一些小的改动，就可以成功部署演示的Airnode。 这些修改需要为HTTP测试网关提供AWS凭证、链提供商网址、助记符和自定的apiKey。 安装先决条件。")]),s._v(" "),a("h2",{attrs:{id:"安装预设"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装预设"}},[s._v("#")]),s._v(" 安装预设")]),s._v(" "),a("p",[s._v("安装 "),a("a",{attrs:{href:"https://docs.docker.com/get-docker/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker桌面"),a("OutboundLink")],1),s._v(" 并启动它。")]),s._v(" "),a("h2",{attrs:{id:"项目文件夹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目文件夹"}},[s._v("#")]),s._v(" 项目文件夹")]),s._v(" "),a("p",[s._v("这个演示需要一个项目文件夹。 您可以手动创建它或下载一个准备好的zip文件。")]),s._v(" "),a("Tabs",{attrs:{type:"border-card"}},[a("Tab",{attrs:{label:"手动创建"}},[a("p",[s._v("创建一个名为"),a("code",[s._v("/quick-deploy-aws")]),s._v("的文件夹，还有两个名为"),a("code",[s._v("/config")]),s._v("和"),a("code",[s._v("/output")]),s._v("的内部文件夹。 将所提供的文件（"),a("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/tutorial/quick-deploy-aws/config-json.html"}},[s._v("config.json")]),s._v("、"),a("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/tutorial/quick-deploy-aws/secrets-env.html"}},[s._v("secrets.env")]),s._v("和"),a("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/tutorial/quick-deploy-aws/aws-env.html"}},[s._v("aws.env")]),s._v("）的内容放入以下所示的位置。")],1),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("quick-deploy-aws\n├── aws.env\n├── config\n│   ├── config.json\n│   └── secrets.env\n└── output\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])]),s._v(" "),a("Tab",{attrs:{label:"下载"}},[a("p",[s._v("下载 "),a("a",{attrs:{href:"/zip-files/quick-deploy-aws-v0.6.zip",download:""}},[s._v("\nquick-deploy-aws")]),s._v(" 项目文件夹。")])])],1),s._v(" "),a("h2",{attrs:{id:"系统配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统配置"}},[s._v("#")]),s._v(" 系统配置")]),s._v(" "),a("p",[s._v("准备好三个配置文件。 默认情况下，Airnode部署器镜像会在"),a("code",[s._v("/config")]),s._v("中寻找"),a("code",[s._v("config.json")]),s._v("和"),a("code",[s._v("secrets.env")]),s._v("，在项目根中寻找"),a("code",[s._v("aws.env")]),s._v("，并将 "),a("code",[s._v("receipt.json")]),s._v("写到"),a("code",[s._v("/output")]),s._v("文件夹中。")]),s._v(" "),a("h3",{attrs:{id:"config-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config-json"}},[s._v("#")]),s._v(" config.json")]),s._v(" "),a("p",[s._v("这个文件不需要你做任何改动。 它只用一个API端点创建。 它将指示Airnode连接到Rinkeby测试网络。 这个文件将从secrets.env中提取（插值）三个变量。")]),s._v(" "),a("h3",{attrs:{id:"secrets-env"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#secrets-env"}},[s._v("#")]),s._v(" secrets.env")]),s._v(" "),a("p",[s._v("为每个字段添加值。")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("CHAIN_PROVIDER_URL")]),s._v(": 链供应商的url地址，如 "),a("a",{attrs:{href:"https://infura.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Infura"),a("OutboundLink")],1),s._v(". 请确保你使用的提供者网址是Rinkeby测试网络的。 使用Infura以外的其他连锁供应商也是可以接受的。")]),s._v(" "),a("ul",[a("li",[s._v("注册或登录Infura。")]),s._v(" "),a("li",[s._v("创建一个新的项目，选择项目中的"),a("strong",[s._v("设置")]),s._v("标签。")]),s._v(" "),a("li",[s._v("在端点选择列表下复制Rinkeby的 URL (https)")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("AIRNODE_WALLET_MNEMONIC")]),s._v(": 为数字钱包提供种子短语（助记符）。 在本演示中，它不需要Rinkeby测试网络中的eth。 如果你没有，请使用管理员CLI命令"),a("RouterLink",{attrs:{to:"/airnode/v0.6/reference/packages/admin-cli.html#generate-mnemonic"}},[s._v("generate-mnemonic")]),s._v("来创建一个助记符，或使用其他你喜欢的方法。")],1)]),s._v(" "),a("li",[a("p",[a("code",[s._v("HTTP_GATEWAY_API_KEY")]),s._v("：创建一个apiKey来验证对HTTP网关的调用。 稍后使用 CURL 测试您的 Airnode 预计长度为 30 - 128 个字符。")])])]),s._v(" "),a("h3",{attrs:{id:"aws-env"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aws-env"}},[s._v("#")]),s._v(" aws.env")]),s._v(" "),a("p",[s._v("将访问凭证添加到你的AWS账户。 部署器镜像将使用它们，将Airnode函数安装到您账户控制的Lambda上。 如果你没有账户，请观看这个"),a("a",{attrs:{href:"https://www.youtube.com/watch?v=KngM5bfpttA",target:"_blank",rel:"noopener noreferrer"}},[s._v("视频"),a("OutboundLink")],1),s._v('来创建一个。 与secrets.env不同的是，你不能用双引号（"）放在数值上。')]),s._v(" "),a("ul",[a("li",[a("code",[s._v("AWS_ACCESS_KEY_ID")]),s._v(": 表示IAM 中的ACCESS_KEY_ID。")]),s._v(" "),a("li",[a("code",[s._v("AWS_SECRET_ACCESS_KEY")]),s._v(": 表示IAM中的SECRET_ACCESS_KEY。")])]),s._v(" "),a("h2",{attrs:{id:"部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),a("p",[s._v("确保Docker正在运行，然后从"),a("code",[s._v("quick-deploy-aws")]),s._v("文件夹的根部执行部署器镜像。 "),a("code",[s._v("receivt.json")]),s._v(" 文件将在完成后创建。 它包含一些部署信息，并将用于删除Airnode。")]),s._v(" "),a("airnode-WarningSimultaneousDeployments",{attrs:{removeLink:"../../docker/deployer-image.html#manual-removal"}}),s._v(" "),a("p",[s._v("运行以下命令来部署演示Airnode。 注意，"),a("code",[s._v("api3/airnode-deployer")]),s._v("的版本与config.json文件中的"),a("code",[s._v("nodeVersion")]),s._v("一致。 "),a("airnode-DeployerPermissionsWarning")],1),s._v(" "),a("Tabs",{attrs:{type:"border-card"}},[a("Tab",{attrs:{label:"Linux/Mac/WSL2"}},[a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it --rm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --env-file aws.env "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("USER_ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" -u"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GROUP_ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" -g"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -v "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/config:/app/config"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -v "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/output:/app/output"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  api3/airnode-deployer:0.6.0 deploy\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])]),s._v(" "),a("Tab",{attrs:{label:"Windows"}},[a("p",[s._v("对于Windows，使用 CMD (而不是 PowerShell)。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it --rm ^\n  --env-file aws.env ^\n  -v "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%cd%/config:/app/config"')]),s._v(" ^\n  -v "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%cd%/output:/app/output"')]),s._v(" ^\n  api3/airnode-deployer:0.6.0 deploy\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])],1),s._v(" "),a("h2",{attrs:{id:"测试-airnode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试-airnode"}},[s._v("#")]),s._v(" 测试 Airnode")]),s._v(" "),a("p",[s._v("在成功部署后，Airnode可以直接使用"),a("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/guides/build-an-airnode/http-gateways.html"}},[s._v("HTTP网关")]),s._v("进行测试，而无需访问区块链。 您需要提供端点参数，以便从集成API中获得响应。")],1),s._v(" "),a("h3",{attrs:{id:"http网关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http网关"}},[s._v("#")]),s._v(" HTTP网关")]),s._v(" "),a("p",[s._v("查看下面的"),a("RouterLink",{attrs:{to:"/airnode/v0.6/grp-providers/tutorial/quick-deploy-aws/config-json.html"}},[s._v("config.json")]),s._v("代码片段，可以看到Airnode的HTTP网关被激活了。 此外，"),a("code",[s._v("/simple/price")]),s._v("的端点（"),a("code",[s._v("endpointId")]),s._v("为"),a("code",[s._v("0xf...53c")]),s._v("）已被添加到"),a("code",[s._v("triggers.http[n]")]),s._v("。 只有添加到 "),a("code",[s._v("http")]),s._v(" 数组的端点才能够测试。")],1),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"nodeSettings"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  ...\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"httpGateway"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"enabled"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// The gateway is activated for this Airnode")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"apiKey"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${HTTP_GATEWAY_API_KEY}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Gateway apiKey")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"maxConcurrency"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  ...\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"triggers"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"rrp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"endpointId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0x6db9e3e3d073ad12b66d28dd85bcf49f58577270b1cc2d48a43c7025f5c27af6"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"oisTitle"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CoinGecko Basic Request"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"endpointName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"coinMarketData"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"http"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"endpointId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0x6db9e3e3d073ad12b66d28dd85bcf49f58577270b1cc2d48a43c7025f5c27af6"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"oisTitle"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CoinGecko Basic Request"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"endpointName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"coinMarketData"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  ...\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("h3",{attrs:{id:"执行端点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行端点"}},[s._v("#")]),s._v(" 执行端点")]),s._v(" "),a("p",[s._v("使用CURL来执行Airnode，并从CoinGecko端点"),a("code",[s._v("/simple/price")]),s._v("获得结果，绕过Airnode部署的Rinkeby测试网络。 作为CURL的替代品，请尝试使用"),a("a",{attrs:{href:"https://insomnia.rest/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Insomnia"),a("OutboundLink")],1),s._v(" or "),a("a",{attrs:{href:"https://www.postman.com/product/rest-client/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Postman"),a("OutboundLink")],1),s._v("等应用程序。 Windows用户也可以使用"),a("a",{attrs:{href:"https://docs.microsoft.com/en-us/windows/wsl/install",target:"_blank",rel:"noopener noreferrer"}},[s._v("Windows Subsystem for Linux"),a("OutboundLink")],1),s._v("（WSL2）来运行CURL for Linux。")]),s._v(" "),a("p",[s._v("为了测试一个端点，做一个HTTP POST请求，将"),a("code",[s._v("endpointId")]),s._v("作为路径参数，"),a("code",[s._v("Content-Type")]),s._v("头设置为"),a("code",[s._v("application/json")]),s._v("，"),a("code",[s._v("x-api-key")]),s._v("头设置为key，将端点参数作为一个key/value对放在请求体中。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("-X")]),s._v(": POST")]),s._v(" "),a("li",[a("code",[s._v("-H")]),s._v(": "),a("code",[s._v("Content-Type")]),s._v(" 使用 "),a("code",[s._v("application/json")]),s._v(" 的值。")]),s._v(" "),a("li",[a("code",[s._v("-H")]),s._v(": "),a("code",[s._v("x-api-key")]),s._v(" 使用 "),a("code",[s._v("HTTP_GATEWAY_API_KEY")]),s._v(" 来自 "),a("code",[s._v("secrets.env")]),s._v(" 文件的值。")]),s._v(" "),a("li",[a("code",[s._v("-d")]),s._v(": 使用请求正文数据来传递端点参数键/值对。")])]),s._v(" "),a("p",[s._v("URL：")]),s._v(" "),a("p",[a("code",{staticStyle:{"overflow-wrap":"break-word"}},[s._v("<httpGatewayUrl>/0xf466b8feec41e9e50815e0c9dca4db1ff959637e564bb13fefa99e9f9f90453c")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("<httpGatewayUrl>")]),s._v(": 网关的基础URL, 可见于"),a("code",[s._v("receivents.json")]),s._v("文件。 用它的值更新下面CURL例子中的占位符。")]),s._v(" "),a("li",[a("code",{staticStyle:{"overflow-wrap":"break-word"}},[s._v("0xf466b8feec41e9e50815e0c9dca4db1ff959637e564bb13fefa99e9f9f90453c")]),s._v(": 作为路径参数传递，要调用的endpointId，见"),a("code",[s._v("config.json")]),s._v("文件中的 "),a("code",[s._v("triggers.rrp[0].endpointId")]),s._v("。")])]),s._v(" "),a("h4",{attrs:{id:"请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求"}},[s._v("#")]),s._v(" 请求")]),s._v(" "),a("Tabs",{attrs:{type:"border-card"}},[a("Tab",{attrs:{label:"Linux/Mac/WSL2"}},[a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -v "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-X POST "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type: application/json'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'x-api-key: 123-my-key-must-be-30-characters-min'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"parameters": {"coinIds": "api3", "coinVs_currencies": "usd"}}\'')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'<httpGatewayUrl>/0x6db9e3e3d073ad12b66d28dd85bcf49f58577270b1cc2d48a43c7025f5c27af6'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])]),s._v(" "),a("Tab",{attrs:{label:"Windows"}},[a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -v ^\n-X POST ^\n-H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Content-Type: application/json"')]),s._v(" ^\n-H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x-api-key: 123-my-key-must-be-30-characters-min"')]),s._v(" ^\n-d "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{'),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("parameters"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(": {"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("coinIds"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("api3"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("coinVs_currencies"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("usd"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v('}}"')]),s._v(" ^\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<httpGatewayUrl>/0x6db9e3e3d073ad12b66d28dd85bcf49f58577270b1cc2d48a43c7025f5c27af6"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])],1),s._v(" "),a("h4",{attrs:{id:"响应"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应"}},[s._v("#")]),s._v(" 响应")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"encodedValue"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0x0000000000000000000000000000000000000000000000000000000000362b30"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"rawValue"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"api3"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"usd"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.55")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"values"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3550000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("airnode-tutorials-TutorialResponse"),s._v(" "),a("h2",{attrs:{id:"移除airnode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移除airnode"}},[s._v("#")]),s._v(" 移除Airnode")]),s._v(" "),a("p",[s._v("当你完成这个演示时，你可以删除它。 当部署完成后，"),a("code",[s._v("receipt.json")]),s._v("文件将被写入"),a("code",[s._v("/output")]),s._v("文件夹中。 需要此文件才能删除 Airnode。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("--env-file")]),s._v(":定位 "),a("code",[s._v("aws.env")]),s._v(" 文件的位置。")]),s._v(" "),a("li",[a("code",[s._v("-v")]),s._v(": 定位"),a("code",[s._v("receipt.json")]),s._v(" 文件的位置。")])]),s._v(" "),a("Tabs",{attrs:{type:"border-card"}},[a("Tab",{attrs:{label:"Linux/Mac/WSL2"}},[a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it --rm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --env-file aws.env "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -v "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/output:/app/output"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  api3/airnode-deployer:0.6.0 remove -r output/receipt.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("Tab",{attrs:{label:"Windows"}},[a("p",[s._v("对于Windows，使用 CMD (而不是 PowerShell)。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it --rm ^\n  --env-file aws.env ^\n  -v "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%cd%/output:/app/output"')]),s._v(" ^\n  api3/airnode-deployer:0.6.0 remove -r output/receipt.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])],1),s._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),a("p",[s._v("在AWS上部署了一个Airnode，并使用作为Airnode部署的一部分而启用的HTTP网关对其进行测试。 Airnode一经部署，就开始与Rinkeby testnet上的AnnodeRrp合约联系，以收集请求者对该Airnode提出的任何请求。 本教程没有涉及提出请求，因为其目的只是为了快速部署一个功能性的Airnode。")]),s._v(" "),a("p",[s._v("在"),a("RouterLink",{attrs:{to:"/airnode/v0.6/reference/cloud-resources.html"}},[s._v("云资源")]),s._v("文档中了解更多关于Airnode使用的AWS资源。")],1)],1)}),[],!1,null,null,null);t.default=n.exports}}]);