(window.webpackJsonp=window.webpackJsonp||[]).push([[431],{1083:function(e,t,a){"use strict";a.r(t);var r=a(15),n=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("TitleSpan",[e._v("Introduction")]),e._v(" "),a("h1",{attrs:{id:"frontmatter-title"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[e._v("#")]),e._v(" "+e._s(e.$frontmatter.title))]),e._v(" "),a("VersionWarning"),e._v(" "),a("TocHeader"),e._v(" "),a("TOC",{staticClass:"table-of-contents",attrs:{"include-level":[2,3]}}),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("Experience building with Beacons at ETHDenver during "),a("a",{attrs:{href:"https://www.ethdenver.com/buidlweek",target:"_blank",rel:"noopener noreferrer"}},[e._v("#BUIDLWEEK"),a("OutboundLink")],1),e._v("!")])])]),e._v(" "),a("p",[e._v("This guide will walk you through developing a smart contract that uses the Beacons that API3 has set up using the first-party oracle operated by Amberdata.")]),e._v(" "),a("h2",{attrs:{id:"amberdata-beacons"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#amberdata-beacons"}},[e._v("#")]),e._v(" Amberdata Beacons")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://amberdata.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("Amberdata"),a("OutboundLink")],1),e._v(" is among the leading cryptocurreny market data providers and has made some of their API endpoints available as Beacons for you to build DeFi applications with. You can see the complete list "),a("RouterLink",{attrs:{to:"/beacon/v0.1/reference/beacon-ids.html"}},[e._v("here")]),e._v(". These Beacons represent VWAP (Volume Weighted Average Price) pair values and are an aggregated form of trade data. VWAP is the average price of an asset over a time interval, based on both volume and price. Please see the Amberdata documentation links below for a better understanding of the values provided.")],1),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://amberdata.io/dictionary/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Data Dictionary"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://docs.amberdata.io/reference#spot-vwap-pairs-latest",target:"_blank",rel:"noopener noreferrer"}},[e._v("Latest [ENT]"),a("OutboundLink")],1),e._v(" - (VWAP)")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://docs.amberdata.io/reference#get-gas-predictions",target:"_blank",rel:"noopener noreferrer"}},[e._v("Gas Predictions"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"requirements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),a("p",[e._v("The Beacons are made available on the following networks:")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[e._v("Network")]),e._v(" "),a("th",{staticStyle:{"text-align":"left"}},[e._v("Faucet")])])]),e._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[e._v("Ropsten")]),e._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://faucet.egorfine.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://faucet.egorfine.com/"),a("OutboundLink")],1)])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[e._v("Rinkeby")]),e._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://www.rinkebyfaucet.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.rinkebyfaucet.com/"),a("OutboundLink")],1)])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[e._v("Goerli")]),e._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://faucet.goerli.mudit.blog/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://faucet.goerli.mudit.blog/"),a("OutboundLink")],1)])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[e._v("Polygon-Mumbai")]),e._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://faucet.polygon.technology/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://faucet.polygon.technology/"),a("OutboundLink")],1)])])])]),e._v(" "),a("p",[e._v("Choose the network that you want to work on, create a wallet with a mnemonic, and fund it from the respective faucet.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("You can run "),a("code",[e._v("npx @api3/airnode-admin generate-mnemonic")]),e._v(" to generate a mnemonic.")])]),e._v(" "),a("p",[e._v("You will also need a blockchain provider URL. You can create a free "),a("a",{attrs:{href:"https://infura.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Infura"),a("OutboundLink")],1),e._v(" account for Ropsten, Rinkeby and Goerli, or use one of the "),a("a",{attrs:{href:"https://docs.polygon.technology/docs/develop/network-details/network/",target:"_blank",rel:"noopener noreferrer"}},[e._v("publicly available provider URLs"),a("OutboundLink")],1),e._v(" for Polygon-Mumbai such as "),a("code",[e._v("https://rpc-mumbai.matic.today")]),e._v(". Your wallet mnemonic and blockchain provider URL will go in your "),a("code",[e._v("credentials.json")]),e._v(" file in the following steps.")]),e._v(" "),a("h2",{attrs:{id:"instructions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#instructions"}},[e._v("#")]),e._v(" Instructions")]),e._v(" "),a("p",[e._v("Clone the "),a("a",{attrs:{href:"https://github.com/api3dao/beacon-reader-example",target:"_blank",rel:"noopener noreferrer"}},[e._v("Beacon reader example"),a("OutboundLink")],1),e._v(":")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/api3dao/beacon-reader-example.git\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" beacon-reader-example\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("Install the dependencies:")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"tests"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tests"}},[e._v("#")]),e._v(" Tests")]),e._v(" "),a("p",[e._v("Run the unit tests defined in the "),a("code",[e._v("test/")]),e._v(" directory:")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("test")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"network-localhost"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#network-localhost"}},[e._v("#")]),e._v(" Network: "),a("code",[e._v("localhost")])]),e._v(" "),a("p",[e._v("Start a local Ethereum node on a separate terminal:")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run eth-node\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("Deploy "),a("code",[e._v("MockRrpBeaconServer")]),e._v(", "),a("code",[e._v("BeaconReaderExample")]),e._v(", and mock-set a beacon value:")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run deploy:localhost\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("You can skip the whitelisting step on "),a("code",[e._v("localhost")]),e._v(".")]),e._v(" "),a("p",[e._v("Have "),a("code",[e._v("BeaconReaderExample")]),e._v(" read the mocked beacon value and print it on the terminal:")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run read-beacon:localhost\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"networks-ropsten-rinkeby-goerli-polygon-mumbai"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#networks-ropsten-rinkeby-goerli-polygon-mumbai"}},[e._v("#")]),e._v(" Networks: "),a("code",[e._v("ropsten")]),e._v(", "),a("code",[e._v("rinkeby")]),e._v(", "),a("code",[e._v("goerli")]),e._v(", "),a("code",[e._v("polygon-mumbai")])]),e._v(" "),a("p",[e._v("Create a "),a("code",[e._v("credentials.json")]),e._v(" file at the root of the repo, similar to "),a("code",[e._v("credentials.example.json")]),e._v(". Fill in the mnemonic and the provider URL for the chain you will be working on.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("You can replace "),a("code",[e._v("polygon-mumbai")]),e._v(" in the following commands with "),a("code",[e._v("ropsten")]),e._v(", "),a("code",[e._v("rinkeby")]),e._v(" or "),a("code",[e._v("goerli")]),e._v(".")])]),e._v(" "),a("p",[e._v("Deploy "),a("code",[e._v("BeaconReaderExample")]),e._v(" that is pointed to the pre-deployed "),a("code",[e._v("RrpBeaconServer")]),e._v(":")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run deploy:polygon-mumbai\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("Whitelist the "),a("code",[e._v("BeaconReaderExample")]),e._v(" you have deployed for the "),a("code",[e._v("ETH/USD")]),e._v(" Beacon powered by Amberdata:")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run whitelist-reader:polygon-mumbai\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("Have "),a("code",[e._v("BeaconReaderExample")]),e._v(" read the Beacon value and print it on the terminal:")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run read-beacon:polygon-mumbai\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("You can read Beacons other than "),a("code",[e._v("ETH/USD")]),e._v(" by modifying "),a("code",[e._v("scripts/whitelist-reader.js")]),e._v(" and "),a("code",[e._v("scripts/read-beacon.js")]),e._v(". Refer to the "),a("RouterLink",{attrs:{to:"/beacon/v0.1/reference/beacon-ids.html"}},[e._v("Beacons IDs")]),e._v(" doc for a complete list.")],1)]),e._v(" "),a("p",[e._v("This should get you started on building a project that uses Beacons! Continue reading if you want to learn more.")]),e._v(" "),a("h2",{attrs:{id:"dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dependencies"}},[e._v("#")]),e._v(" Dependencies")]),e._v(" "),a("p",[e._v("Amberdata is using "),a("a",{attrs:{href:"/airnode/v0.3"}},[e._v("Airnode "),a("code",[e._v("v0.3")])]),e._v(" as the oracle node, which we have developed to enable API provider-operated oracles. You are recommended to use "),a("code",[e._v("v0.1")]),e._v(" of "),a("code",[e._v("@api3/services")]),e._v(" in your project to easily fetch the information about a specific Beacon.")]),e._v(" "),a("h2",{attrs:{id:"api3-services-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api3-services-api"}},[e._v("#")]),e._v(" "),a("code",[e._v("@api3/services")]),e._v(" API")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("@api3/services")]),e._v(" API exposes two functions:")]),e._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://github.com/api3dao/services/blob/main/src/index.ts#L66",target:"_blank",rel:"noopener noreferrer"}},[e._v("whitelistBeaconReader"),a("OutboundLink")],1),e._v(" - This function can be used to programatically whitelist a Beacon reader contract that you have implemented and deployed to read values from a particular Beacon. You can see it used by the whitelisting script in the Beacon reader example project "),a("a",{attrs:{href:"https://github.com/api3dao/beacon-reader-example/blob/main/scripts/whitelist-reader.js#L34",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1),e._v(". This function requires 5 parameters:\n"),a("ul",[a("li",[a("code",[e._v("beaconId")]),e._v(" - the ID of the Beacon for which the Beacon reader will be whitelisted")]),e._v(" "),a("li",[a("code",[e._v("beaconReaderAddress")]),e._v(" - the address of the Beacon reader that will be whitelisted")]),e._v(" "),a("li",[a("code",[e._v("chain")]),e._v(" - the name of the chain, e.g. "),a("code",[e._v("ropsten")])]),e._v(" "),a("li",[a("code",[e._v("providerUrl")]),e._v(" - the URL of the blockchain provider that will be used to create a transaction")]),e._v(" "),a("li",[a("code",[e._v("senderAccount")]),e._v(" - an object with two fields, "),a("code",[e._v("mnemonic")]),e._v(" (required) and "),a("code",[e._v("derivationPath")]),e._v(" (optional) specifying the account that will be used to make the whitelisting transaction")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/api3dao/services/blob/main/src/index.ts#L27",target:"_blank",rel:"noopener noreferrer"}},[e._v("getServiceData"),a("OutboundLink")],1),e._v(" - You can use this function to get the details of a particular Beacon. The most important fields that this will return are the address of "),a("code",[e._v("RrpBeaconServer")]),e._v(" (which you need to deploy your Beacon reader smart contract) and "),a("code",[e._v("beaconId")]),e._v(" (which you need to read a Beacon value). This function requires 3 parameters:\n"),a("ul",[a("li",[a("code",[e._v("apiName")]),e._v(" - the "),a("a",{attrs:{href:"https://github.com/api3dao/operations/tree/main/data/apis",target:"_blank",rel:"noopener noreferrer"}},[e._v("name of the API"),a("OutboundLink")],1),e._v(". Currently, the only option is "),a("code",[e._v("Amberdata")])]),e._v(" "),a("li",[a("code",[e._v("beaconName")]),e._v(" - the name of one of the "),a("a",{attrs:{href:"https://docs.api3.org/beacon/v0.1/reference/beacon-ids.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("beacons"),a("OutboundLink")],1),e._v(", e.g. "),a("code",[e._v("ETH/USD")])]),e._v(" "),a("li",[a("code",[e._v("chain")]),e._v(" - the name of the chain, e.g. "),a("code",[e._v("ropsten")])])])])]),e._v(" "),a("p",[e._v("Using "),a("code",[e._v("@api3/services")]),e._v(" is not required to create a Beacon reader application. You can whitelist a Beacon reader smart contract manually by following the instructions below. You can get the "),a("code",[e._v("beaconId")]),e._v(" from "),a("RouterLink",{attrs:{to:"/beacon/v0.1/reference/beacon-ids.html"}},[e._v("Beacon IDs Section")]),e._v(" and an address of the "),a("code",[e._v("RrpBeaconServer")]),e._v(" from the "),a("RouterLink",{attrs:{to:"/beacon/v0.1/reference/contract-addresses.html"}},[e._v("Contract Addresses Section")]),e._v(".")],1),e._v(" "),a("h2",{attrs:{id:"whitelisting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#whitelisting"}},[e._v("#")]),e._v(" Whitelisting")]),e._v(" "),a("p",[e._v("Before a smart contract can read a Beacon value, it needs to be whitelisted by an on-chain mechanism authorized by the API3 DAO. This is done for protection and monetization of premium, first-party oracle services. The Beacons set up for the hackathon allow self-whitelisting, which means that you are allowed to make the transaction that will whitelist your contract to read the specific Beacon.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Amberdata Beacons are made available on a number of testnets for "),a("em",[e._v("#BUIDLWEEK")]),e._v(". For production usage, you will need to get in contact with an API3 DAO representative to have your contract whitelisted for it to be able to read Beacons.")])]),e._v(" "),a("h3",{attrs:{id:"manual-whitelisting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#manual-whitelisting"}},[e._v("#")]),e._v(" Manual whitelisting")]),e._v(" "),a("p",[e._v("In addition to using the "),a("code",[e._v("@api3/services")]),e._v(" API, you can manually whitelist your contracts by making a transaction over a block explorer.")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Open "),a("a",{attrs:{href:"https://etherscan.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Etherscan"),a("OutboundLink")],1),e._v("/"),a("a",{attrs:{href:"https://polygonscan.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Polygonscan"),a("OutboundLink")],1),e._v(" and select the desired testnet using the icon to the right of the Sign-In button in the top right corner.")])]),e._v(" "),a("li",[a("p",[e._v("Enter the address for the "),a("RouterLink",{attrs:{to:"/beacon/v0.1/reference/contract-addresses.html#selfserverrpbeaconserverwhitelister-sol"}},[e._v("SelfServeRrpBeaconServerWhitelister")]),e._v(" contract in the search field.")],1)]),e._v(" "),a("li",[a("p",[e._v("Click "),a("em",[e._v("contract > write contract > connect to web3")]),e._v(". Connect your wallet using the testnet you have selected in Etherscan/Polygonscan.")])]),e._v(" "),a("li",[a("p",[e._v("Select the "),a("code",[e._v("whitelistReader")]),e._v(" function (#5) and enter the "),a("RouterLink",{attrs:{to:"/beacon/v0.1/reference/beacon-ids.html"}},[e._v("beaconId")]),e._v(" and the address of your smart contract (i.e., Beacon reader).")],1)]),e._v(" "),a("li",[a("p",[e._v("Click the "),a("em",[e._v("Write")]),e._v(" button and execute the transaction from your wallet.")])])]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("Each deployed Beacon reader contract needs to be whitelisted for all the respective Beacons that it will read.")])]),e._v(" "),a("h2",{attrs:{id:"getting-help"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getting-help"}},[e._v("#")]),e._v(" Getting Help")]),e._v(" "),a("p",[e._v("If you need any assistance, please drop by the "),a("a",{attrs:{href:"https://discord.com/channels/758003776174030948/871787274386411580",target:"_blank",rel:"noopener noreferrer"}},[e._v("API3 Discord support channel"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"work-with-api3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#work-with-api3"}},[e._v("#")]),e._v(" Work with API3")]),e._v(" "),a("p",[e._v("Consider working with the Core Technical Team at API3. Our search for you is never ending. We want talented individuals that think blockchain technology is "),a("em",[e._v("the big thing")]),e._v(", that are ready to make it better and embrace collaboration as an endless journey. "),a("RouterLink",{attrs:{to:"/api3/introduction/work.html"}},[e._v("Work with API3")]),e._v(".")],1)],1)}),[],!1,null,null,null);t.default=n.exports}}]);